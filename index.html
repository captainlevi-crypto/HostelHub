<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HostelHub â€“ Login</title>
  <style>
    body{font-family:Arial, sans-serif; background:#f4f6f8; display:flex; align-items:center; justify-content:center; min-height:100vh; margin:0}
    .card{width:360px;background:#fff;padding:22px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,.08)}
    h2{text-align:center;margin:0 0 14px}
    .field{width:100%;margin:8px 0}
    input[type="text"],input[type="email"],input[type="password"]{width:100%;padding:10px;border-radius:6px;border:1px solid #d9dce0;font-size:14px;box-sizing:border-box}
    button{width:100%;padding:10px;border-radius:6px;border:none;background:#2563eb;color:#fff;font-size:15px;cursor:pointer;margin-top:5px}
    button:hover{background:#1d4ed8}
    .msg{min-height:20px;text-align:center;margin-top:8px;font-size:14px}
    .msg.error{color:#d9534f}
    .msg.success{color:#16a34a}
    .small{font-size:12px;color:#666;text-align:center;margin-top:10px}
  </style>
</head>
<body>
  <div class="card">
    <h2>HostelHub Login</h2>

    <div id="form">
      <input class="field" type="text" id="username" placeholder="Email" autocomplete="username" />
      <input class="field" type="password" id="password" placeholder="Password" autocomplete="current-password" />
      <button id="submitBtn">Login</button>
      <p class="msg" id="message"></p>
      <p class="small">Students: Use your email to login directly<br>Admin: Use admin credentials</p>
    </div>
  </div>

<script>
(() => {
  // === ADMIN CONFIG ===
  const ADMIN_EMAIL = "shettyrajath2406@gmail.com";
  const ADMIN_PASSWORD = "admin123";

  // === ELEMENTS ===
  const submitBtn = document.getElementById("submitBtn");
  const messageEl = document.getElementById("message");
  const usernameEl = document.getElementById("username");
  const passwordEl = document.getElementById("password");

  function showMessage(text, type = "") {
    messageEl.textContent = text || "";
    messageEl.className = type ? `msg ${type}` : "msg";
  }

  // Submit handler
  submitBtn.addEventListener("click", (e) => {
    e.preventDefault();
    const email = usernameEl.value.trim().toLowerCase();
    const password = passwordEl.value;

    showMessage("");
    
    if (!email || !password) {
      showMessage("Please enter both email and password.", "error");
      return;
    }

    // Email format validation
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      showMessage("Please enter a valid email address.", "error");
      return;
    }

    // === ADMIN LOGIN ===
    if (email === ADMIN_EMAIL) {
      if (password === ADMIN_PASSWORD) {
        sessionStorage.setItem("hostelhub_admin", "true");
        sessionStorage.removeItem("hostelhub_user");
        showMessage("Admin login successful! Redirecting...", "success");
        setTimeout(() => {
          window.location.href = "admin-dashboard.html";
        }, 700);
      } else {
        showMessage("Invalid admin password.", "error");
      }
      return;
    }

    // === STUDENT LOGIN (Direct Access) ===
    // Any valid email (except admin) can login directly
    sessionStorage.removeItem("hostelhub_admin");
    sessionStorage.setItem("hostelhub_user", JSON.stringify({ 
      username: email, 
      password: password,
      role: "student" 
    }));
    
    showMessage("Login successful! Redirecting...", "success");
    setTimeout(() => {
      window.location.href = "student-dashboard.html";
    }, 700);
  });

  // Press Enter to submit
  [usernameEl, passwordEl].forEach(el => {
    el.addEventListener("keydown", (e) => {
      if (e.key === "Enter") submitBtn.click();
    });
  });

})();
</script>
</body>
</html>